(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0dsO":function(t,e,n){t.exports={li:"Post-module--li--LInUv"}},"2io6":function(t,e,n){t.exports={form:"PostForm-module--form--1ct4l",buttons:"PostForm-module--buttons--1Fw1C"}},"3yvu":function(t,e,n){t.exports={main:"Dashboard-module--main--1Hb8C",nav:"Dashboard-module--nav--1u-Ij",selected:"Dashboard-module--selected--2X4aX"}},OQnD:function(t,e,n){t.exports={button:"AddPostButton-module--button--17q26"}},mR1u:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return j}));var a=n("q1tI"),o=n.n(a),r=n("o0o1"),c=n.n(r),u=(n("ls82"),n("HaE+")),s=(n("vDqi"),n("2io6")),l=n.n(s);function i(t){var e=Object(a.useState)(t.title||""),n=e[0],r=e[1],c=Object(a.useState)(t.body||""),u=c[0],s=c[1];return o.a.createElement("form",{onSubmit:t.id?function(e){e.preventDefault(),n&&u&&t.updatePost({title:n,body:u,id:t.id}),t.toggleForm()}:function(e){e.preventDefault(),n&&u&&t.createPost({title:n,body:u}),t.toggleForm()},className:l.a.form},o.a.createElement("input",{name:"title",type:"text",className:l.a.title,value:n,onChange:function(t){return r(t.target.value)}}),o.a.createElement("textarea",{name:"body",className:l.a.body,value:u,onChange:function(t){return s(t.target.value)}}),o.a.createElement("div",{className:l.a.buttons},o.a.createElement("button",{type:"button",onClick:t.toggleForm},"cancel"),o.a.createElement("button",{type:"submit"},t.id?"update":"create"),t.id&&o.a.createElement("button",{type:"button",onClick:function(){return t.deletePost(t.id)}},"delete")))}var d=n("OQnD"),m=n.n(d);function f(t){var e=Object(a.useState)(!1),n=e[0],r=e[1],c=function(){return r(!n)};return n?o.a.createElement(i,{toggleForm:c,createPost:t.createPost}):o.a.createElement("button",{className:m.a.button,onClick:c},o.a.createElement("svg",{width:"279",viewBox:"0 0 279 189",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M1.5 169C28.3333 186.834 83.1 208 87.5 150C93 77.5002 181 37.0002 200 80.0002C219 123 291.5 168.5 275.5 115C259.5 61.5001 238 -16.4999 275.5 5.00006",stroke:"black","stroke-width":"4"})))}var p=n("0dsO"),b=n.n(p);function h(t){return o.a.createElement("li",{className:b.a.li,onClick:t.toggleForm},o.a.createElement("h2",null,t.title),o.a.createElement("h3",null,t.createdAt.slice(0,10)+"."))}function E(t){var e=Object(a.useState)(!1),n=e[0],r=e[1],c=function(){return r(!n)};return o.a.createElement(o.a.Fragment,null,!n&&o.a.createElement(h,{title:t.title,createdAt:t.createdAt,toggleForm:c}),n&&o.a.createElement(i,{id:t.id,title:t.title,body:t.body,toggleForm:c,updatePost:t.updatePost,deletePost:t.deletePost}))}function g(t){return o.a.createElement("ul",null,t.posts.map((function(e){return o.a.createElement(E,{key:e.id,title:e.title,body:e.body,id:e.id,createdAt:e.created_at,updatePost:t.updatePost,deletePost:t.deletePost})})))}var v=n("3yvu"),y=n.n(v),P="https://vast-fortress-99756.herokuapp.com/api";function O(t){var e=Object(a.useState)("posts"),n=e[0],r=e[1],s=Object(a.useState)([]),l=s[0],i=s[1],d=Object(a.useState)([]),m=d[0],p=d[1],b=function(){return r("posts"===n?"pages":"posts")};function h(){return(h=Object(u.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(P+"/posts",{method:"GET"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}));case 2:return e=t.sent,i(e.posts),t.next=6,fetch(P+"/pages",{method:"GET"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}));case 6:n=t.sent,p(n.pages);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){return(E=Object(u.a)(c.a.mark((function t(e){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(P+"/"+n,{method:"POST",body:JSON.stringify(e)}).then((function(t){return t.json()}));case 2:a=t.sent,"posts"===n?i((function(t){return[].concat(a).concat(t)})):p((function(t){return[].concat(a).concat(t)}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){h.apply(this,arguments)}()}),[]),o.a.createElement("main",{className:y.a.main},o.a.createElement("nav",{className:y.a.nav},o.a.createElement("ul",null,o.a.createElement("li",{className:"posts"===n?y.a.selected:null,onClick:b},"Posts."),o.a.createElement("li",{className:"pages"===n?y.a.selected:null,onClick:b},"Pages."))),o.a.createElement(g,{posts:"posts"===n?l:m,updatePost:function(t){var e=t.title,a=t.body,o=t.id;fetch(P+"/"+n+"/"+o,{method:"PUT",body:JSON.stringify({title:e,body:a})}).then((function(t){return t.json()})),"posts"===n?i((function(e){return e.map((function(e){return e.id===t.id?Object.assign({},e,{title:t.title,body:t.body}):e}))})):p((function(e){return e.map((function(e){return e.id===t.id?Object.assign({},e,{title:t.title,body:t.body}):e}))}))},deletePost:function(t){fetch(P+"/"+n+"/"+t,{method:"DELETE"}).then((function(t){return t.json()})),"posts"===n?i((function(e){return e.filter((function(e){return e.id!==t}))})):p((function(e){return e.filter((function(e){return e.id!==t}))}))}}),o.a.createElement(f,{createPost:function(t){return E.apply(this,arguments)}}))}function j(){return o.a.createElement(O,null)}}}]);
//# sourceMappingURL=component---src-pages-admin-js-ce894cfbf0eade1b4931.js.map